source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
p_ulcer_male
p_ulcer_female
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
simulation_baseline_patients$eGFR60more
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_results_female_comp
sim_results_female_comp$simulation_patients_history
sim_results_female_comp$simulation_patients_history
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
current_survival
1:max(sim_results_female_comp$simulation_patients_history$SDURATION)
View(tail(KM_data))
current_survival
sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")]
sim_results_female_comp$simulation_patients_history
sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")]
sim_results_female_comp$simulation_patients_history
sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")]
View(sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")])
veteran
sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")]
KM_data
sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")]
sim_results_female_comp$simulation_patients_history
sim_results_female_comp$simulation_patients_history[,c(SIMID,event_vars,"dead")]
sim_results_female_comp$simulation_patients_history[,c("SIMID",event_vars,"dead")]
sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION",event_vars,"dead")]
View(tail(KM_data))
sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT")]
CHF_KM_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT")]
CHF_KM_data
CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT
aggregate(simulation_patients_history$CHF.EVENT, list(Patient = simulation_patients_history$SIMID), sum)
CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT
aggregate(CHF_KM_data, list(Patient = CHF_KM_data$SIMID), sum)
aggregate(CHF_KM_data$CHF.EVENT, list(Patient = CHF_KM_data$SIMID), sum)
aggregate(CHF_KM_data$SDURATION, list(Patient = CHF_KM_data$SIMID), max())
aggregate(CHF_KM_data$SDURATION, list(Patient = CHF_KM_data$SIMID), max)
aggregate(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT, list(Patient = CHF_KM_data$SIMID), max)
aggregate(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT, list(Patient = CHF_KM_data$SIMID), sum())
aggregate(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT, list(Patient = CHF_KM_data$SIMID), sum
)
aggregate(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT, list(Patient = CHF_KM_data$SIMID), sum)
aggregate(CHF_KM_data$SDURATION, list(Patient = CHF_KM_data$SIMID), max)
aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT,CHF_KM_data$SDURATION), list(Patient = CHF_KM_data$SIMID), sum)
aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat <- aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat
cbind(chf_mat,aggregate(CHF_KM_data$SDURATION, list(Patient = CHF_KM_data$SIMID), max))
chf_mat <- aggregate(y = c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat <- aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat
chf_mat$y <- aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat
chf_mat <- aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat
chf_mat <- c()
chf_mat
chf_mat$x <- aggregate(c(CHF_KM_data$SDURATION*CHF_KM_data$CHF.EVENT), list(Patient = CHF_KM_data$SIMID), sum)
chf_mat
chf_mat$y <- cbind(chf_mat,aggregate(CHF_KM_data$SDURATION, list(Patient = CHF_KM_data$SIMID), max))
chf_mat
melanoma
boot::melanoma
boot::melanoma
sim_results_female_comp$simulation_patients_history[,c(event_vars,"dead")]
sim_results_female_comp$simulation_patients_history[,c("CHF.EVENT")]
sim_results_female_comp$simulation_patients_history[,c("SIMID","CHF.EVENT")]
sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT")]
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT")]
CHF_data
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data
CHF_data$CHF.EVENT + CHF_data$dead
CHF_data$event <- CHF_data$CHF.EVENT + CHF_data$dead
CHF_data
CHF_data[which(CHF_data$event==1),]
CHF_data_agg <- CHF_data[which(CHF_data$event==1),]
CHF_data_agg
if_else(CHF_data_agg$CHF.EVENT>CHF_data_agg$dead,1,0)
CHF_data_agg$status <- if_else(CHF_data_agg$CHF.EVENT>CHF_data_agg$dead,1,0)
CHF_data_agg
km.chf <- with(CHF_data_agg, Surv(SDURATION, status))
km.chf
km.chf.fit <- survfit(Surv(SDURATION, status) ~ 1, data=CHF_data_agg)
km.chf.fit
summary(km.chf.fit)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
summary(km.chf.fit)
km.chf.fit <- survfit(Surv(SDURATION, status) ~ 1, data=CHF_data_agg)
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data$event <- CHF_data$CHF.EVENT + CHF_data$dead
CHF_data_agg <- CHF_data[which(CHF_data$event==1),]
CHF_data_agg$status <- if_else(CHF_data_agg$CHF.EVENT>CHF_data_agg$dead,1,0)
km.chf <- with(CHF_data_agg, Surv(SDURATION, status))
km.chf.fit <- survfit(Surv(SDURATION, status) ~ 1, data=CHF_data_agg)
summary(km.chf.fit)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
CHF_data
CHF_data_agg
source('~/.active-rstudio-document', echo=TRUE)
baseline_characteristics
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
# CHF KM
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data
length(CHF_data )
CHF_data_agg
dim(CHF_data_agg)
# CHF KM
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data$event <- CHF_data$CHF.EVENT + CHF_data$dead
CHF_data_agg <- CHF_data[which(CHF_data$event==1),]
CHF_data_agg$status <- if_else(CHF_data_agg$CHF.EVENT>CHF_data_agg$dead,1,0)
CHF_data_agg
dim(CHF_data_agg)
CHF_data_agg[which(CHF_data_agg$dead==1)]
CHF_data_agg[which(CHF_data_agg$dead==1,)]
CHF_data_agg[which(CHF_data_agg$dead==1),]
CHF_data_agg[which(CHF_data_agg$dead==1 & CHF_data_agg$CHF.EVENT==1),]
CHF_data_agg[which(CHF_data_agg$dead==1 && CHF_data_agg$CHF.EVENT==1),]
CHF_data_agg[which(CHF_data_agg$CHF.EVENT==1),]
dim(CHF_data_agg[which(CHF_data_agg$CHF.EVENT==1),])
dim(CHF_data_agg[which(CHF_data_agg$CHF.EVENT==1)&which(CHF_data_agg$dead==1),])
dim(CHF_data_agg[which(CHF_data_agg$CHF.EVENT==1) && which(CHF_data_agg$dead==1),])
CHF_data_agg
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data
# CHF KM
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data$event <- CHF_data$CHF.EVENT + CHF_data$dead
CHF_data_agg <- CHF_data[which(CHF_data$event==1),]
CHF_data_agg$status <- if_else(CHF_data_agg$CHF.EVENT>CHF_data_agg$dead,1,0)
CHF_data_agg
CHF_data_agg[!duplicated(CHF_data_agg$SIMID),]
dim(CHF_data_agg[!duplicated(CHF_data_agg$SIMID),])
dim(CHF_data_agg[duplicated(CHF_data_agg$SIMID),])
dim(CHF_data_agg[!duplicated(CHF_data_agg$SIMID),])
CHF_data_agg
CHF_data_agg[!duplicated(CHF_data_agg$SIMID),]
CHF_data_agg[duplicated(CHF_data_agg),]
CHF_data_agg[duplicated(CHF_data_agg$SIMID),]
dim(CHF_data_agg[duplicated(CHF_data_agg$SIMID),])
dim(CHF_data_agg[!duplicated(CHF_data_agg$SIMID),])
CHF_data_agg[!duplicated(CHF_data_agg$SIMID),]
CHF_data_agg
# CHF KM
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data$event <- CHF_data$CHF.EVENT + CHF_data$dead
CHF_data_agg <- CHF_data[which(CHF_data$event==1),]
CHF_data_agg$status <- if_else(CHF_data_agg$CHF.EVENT>CHF_data_agg$dead,1,0)
CHF_data_agg
CHF_data <- sim_results_female_comp$simulation_patients_history[,c("SIMID","SDURATION","CHF.EVENT","dead")]
CHF_data
CHF_data$event <- CHF_data$CHF.EVENT + CHF_data$dead
CHF_data
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
CHF_data_agg
CHF_data_agg[!duplicated(CHF_data_agg$SIMID),]
dim(CHF_data_agg[!duplicated(CHF_data_agg$SIMID),])
CHF_data_agg[!duplicated(CHF_data_agg$SIMID),]
source('~/.active-rstudio-document', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
CHF_data_agg
km.chf
summary(km.chf.fit)
source('~/.active-rstudio-document', echo=TRUE)
km.chf.fit
km.chf.fit$time
km.chf.fit$surv
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
annual_p_weibull(macrovascular_risk_equations$CHF,validation_patient[2,]
%>% select(risk_factors_macrovascular),validation_patient[2,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$IHD,validation_patient[1,]
%>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$FMIMALE,validation_patient[2,] %>% select(risk_factors_macrovascular),validation_patient[2,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$FMIFEMALE,validation_patient[1,] %>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$CHF,validation_patient[2,]
%>% select(risk_factors_macrovascular),validation_patient[2,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$IHD,validation_patient[1,]
%>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$IHD,validation_patient[2,]%>% select(risk_factors_macrovascular),validation_patient[2,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$FMIMALE,validation_patient[2,] %>% select(risk_factors_macrovascular),validation_patient[2,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$FMIFEMALE,validation_patient[1,] %>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$SMI,validation_patient[1,] %>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$FSTROKE,validation_patient[1,]%>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
annual_p_weibull(macrovascular_risk_equations$SSTROKE,validation_patient[1,] %>% select(risk_factors_macrovascular),validation_patient[1,"YEAR"])
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
annual_p_weibull(microvascular_risk_equations$BLIND,validation_patient[1,] %>% select(risk_factors_microvascular),validation_patient[1,"YEAR"])
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
annual_p_weibull(microvascular_risk_equations$FAMPNOULCER,validation_patient[1,] %>% select(risk_factors_microvascular),validation_patient[1,"YEAR"])
annual_p_weibull(microvascular_risk_equations$FAMPULCER,validation_patient[1,] %>% select(risk_factors_microvascular),validation_patient[1,"YEAR"])
annual_p_weibull(microvascular_risk_equations$SAMP,validation_patient[1,] %>% select(risk_factors_microvascular),validation_patient[1,"YEAR"])
annual_p_weibull(microvascular_risk_equations$RENALF,validation_patient[1,] %>% select(risk_factors_microvascular),validation_patient[1,"YEAR"])
5.42*9
5.85*9
7.41*9
7.01*9
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
mortality_risk_equations
annual_p_gompertz(mortality_risk_equations$DEATHNOHIST, validation_patient[1,] %>% select(risk_factors_mortality),validation_patient[1,]$AGE.DIAG + validation_patient[1,]$YEAR)
annual_p_logistic(microvascular_risk_equations$ULCER,validation_patient[1,] %>% select(risk_factors_microvascular))
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[1,] %>% select(risk_factors_mortality))$p
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[2,] %>% select(risk_factors_mortality))$p
annual_p_logistic(mortality_risk_equations$DEATHYSEVENT,validation_patient[1,] %>% select(risk_factors_mortality))$p
annual_p_gompertz(mortality_risk_equations$DEATHNOHIST, validation_patient[1,] %>% select(risk_factors_mortality),validation_patient[1,]$AGE.DIAG + validation_patient[1,]$YEAR)
annual_p_gompertz(mortality_risk_equations$DEATHHISTNOEVENT, validation_patient[1,] %>% select(risk_factors_mortality),validation_patient[1,]$AGE.DIAG + validation_patient[1,]$YEAR)$p
source("setup.R")
# Patient characteristics
validation_patient <- read.csv("input/UK/baseline_characteristics_UK.csv", sep=",")
validation_patient
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
summary(km.chf.fit)
km.chf.fit$surv
km.chf.fit$time
km.chf.fit$type
km.chf.fit$surv
KM_data
write.csv(KM_data, 'KM_data.csv', quote = FALSE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
female_input
# Model function:
source("R/SMI in type II diabetes - HE model v3.R")
# Variable defined to keep track of simulation time (delete afterwards)
init <- Sys.time()
# Control variables of simulation
npats_input   <- 1000  # Number of patients in simulation
tx_cost_input <- 0     # Total treatment cost
treateff_start_input   <- 1 # Cycle in which treatment effect starts
treateff_end_input     <- 4 # Cycle in which treatment effect ends
treateff_decline_input <- 2 # Cycle in which treatment effect starts to decline linearly
treateff_hba1c_input <- 0 # Treatment effect on HbA1c (in absolute %-points HbA1c)
treateff_hdl_input   <- 0 # Treatment effect on HDL-cholesterol (absolute effect, which unit??)
treateff_ldl_input   <- 0 # Treatment effect on LDL-cholesterol (absolute effect, which unit??)
# The sim.vars object collects all parameters that define the simulation into one object
# Then, it is saved with the output of the simulation. This way, if we  have multiple output files, we always have the information
# on the relevant input parameters that were used to produce the output.
sim.vars <- list(npats_input, tx_cost_input, mget(apropos('treateff.')))
# A patient-level model make use of patient characteristics.
baseline_characteristics <- read.csv("input/UK/baseline_characteristics_UK.csv", sep=",")
# baseline_characteristics <- read.csv("/input/UK/baseline_characteristics_UK_rank_1_study_pop.csv", sep=",")
baseline_characteristics
baseline_characteristics
baseline_characteristics
results_dir <- ("validation/")
dir.create(results_dir)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
# Model function:
source("R/SMI in type II diabetes - HE model v3.R")
# Variable defined to keep track of simulation time (delete afterwards)
init <- Sys.time()
# Control variables of simulation
npats_input   <- 1000  # Number of patients in simulation
tx_cost_input <- 0     # Total treatment cost
treateff_start_input   <- 1 # Cycle in which treatment effect starts
treateff_end_input     <- 4 # Cycle in which treatment effect ends
treateff_decline_input <- 2 # Cycle in which treatment effect starts to decline linearly
treateff_hba1c_input <- 0 # Treatment effect on HbA1c (in absolute %-points HbA1c)
treateff_hdl_input   <- 0 # Treatment effect on HDL-cholesterol (absolute effect, which unit??)
treateff_ldl_input   <- 0 # Treatment effect on LDL-cholesterol (absolute effect, which unit??)
# The sim.vars object collects all parameters that define the simulation into one object
# Then, it is saved with the output of the simulation. This way, if we  have multiple output files, we always have the information
# on the relevant input parameters that were used to produce the output.
sim.vars <- list(npats_input, tx_cost_input, mget(apropos('treateff.')))
# A patient-level model make use of patient characteristics.
baseline_characteristics <- read.csv("input/UK/baseline_characteristics_UK.csv", sep=",")
# baseline_characteristics <- read.csv("/input/UK/baseline_characteristics_UK_rank_1_study_pop.csv", sep=",")
###########################################################
# Validation
female_input <- 1 #1 = female, 0 = male
# baseline_characteristics$SMOKER <- 1
results_dir <- ("validation/female_smoker_")
#dir.create(results_dir)
###########################################################
baseline_characteristics
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
baseline_characteristics
results_dir <- ("validation/female_CHF_HIST_")
#dir.create(results_dir)
export_csv(KM_data)
export_csv(clinical_results_table)
#write.csv(KM_data, 'KM_data_smoker.csv', quote = FALSE)
<<<<<<< Updated upstream
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/setup.R')
source('~/GitHub/COMPAR-EU_diabetes_model/setup.R')
install.packages(pkgs)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
background_DEATH_prob
background_DEATH_prob[Age=50]
background_DEATH_prob[Age=50,]
background_DEATH_prob$Age==50
background_DEATH_prob$Age==50
input_female
background_DEATH_prob[background_DEATH_prob$Age==50]
background_DEATH_prob[background_DEATH_prob$Age==50,]
background_DEATH_prob[background_DEATH_prob$Age==50,Males]
background_DEATH_prob[background_DEATH_prob$Age==50,c(Males)]
background_DEATH_prob[background_DEATH_prob$Age==50,1]
background_DEATH_prob[background_DEATH_prob$Age==50,2]
background_DEATH_prob[background_DEATH_prob$Age==50,3]
background_DEATH_prob[background_DEATH_prob$Age==50,3]
background_DEATH_prob[background_DEATH_prob$Age==50,]
background_DEATH_prob[background_DEATH_prob$Age==50,Males =1]
background_DEATH_prob[background_DEATH_prob$Age==50,]$Males
background_DEATH_prob[background_DEATH_prob$Age==50]$Males
background_DEATH_prob$Age==50
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
female_input
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R')
sim_clinical_results_female_table_comp
=======
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[1,] %>% select(risk_factors_mortality))$p
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[2,] %>% select(risk_factors_mortality))$p
# Death in subsequent year of events females
annual_p_logistic(mortality_risk_equations$DEATHYSEVENT,validation_patient[1,] %>% select(risk_factors_mortality))$p
annual_p_logistic(mortality_risk_equations$DEATHYSEVENT,validation_patient[2,] %>% select(risk_factors_mortality))$p
# [1] 0.6601135
# Death in year with no history or events females
annual_p_gompertz(mortality_risk_equations$DEATHNOHIST, validation_patient[1,] %>% select(risk_factors_mortality),validation_patient[1,]$AGE.DIAG + validation_patient[1,]$YEAR)$p
annual_p_gompertz(mortality_risk_equations$DEATHNOHIST, validation_patient[1,] %>% select(risk_factors_mortality),validation_patient[1,]$CURR.AGE)$p # not sure why in the simulation code we used the line above, it might give problems when updating and it's slower? updating seems fine because YEAR is updating
# [1] 0.004071926
# Death in year with no history or events males
annual_p_gompertz(mortality_risk_equations$DEATHNOHIST, validation_patient[2,] %>% select(risk_factors_mortality),validation_patient[1,]$AGE.DIAG + validation_patient[1,]$YEAR)$p
annual_p_gompertz(mortality_risk_equations$DEATHNOHIST, validation_patient[2,] %>% select(risk_factors_mortality),validation_patient[1,]$CURR.AGE)$p # not sure why in the simulation code we used the line above, it might give problems when updating and it's slower? updating seems fine because YEAR is updating
# [1] 0.005117118
annual_p_gompertz(mortality_risk_equations$DEATHHISTNOEVENT, validation_patient[2,] %>% select(risk_factors_mortality),validation_patient[1,]$AGE.DIAG + validation_patient[1,]$YEAR)$p
annual_p_gompertz(mortality_risk_equations$DEATHHISTNOEVENT, validation_patient[2,] %>% select(risk_factors_mortality),validation_patient[1,]$CURR.AGE)$p # not sure why in the simulation code we used the line above, it might give problems when updating and it's slower? updating seems fine because YEAR is updating
# [1] 0.006813194
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
baseline_characteristics
View(sim_clinical_results_female_table_comp)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
View(sim_clinical_results_female_table_comp)
current_patient$CHF.HIST
CHF.HIST
baseline_characteristics
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
baseline_characteristics
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
macrovascular_risk_equations
current_hist
annual_p_gompertz(mortality_risk_equations$DEATHHISTNOEVENT, current_patient_mortality,current_patient$AGE.DIAG + current_patient$YEAR)$p
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
# Death in 1st year of events females
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[1,] %>% select(risk_factors_mortality))$p
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[2,] %>% select(risk_factors_mortality))$p
# [1] 0.09313699
source('~/GitHub/COMPAR-EU_diabetes_model/R/validation_ukpds.R', echo=TRUE)
# Death in 1st year of events females
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[1,] %>% select(risk_factors_mortality))$p
annual_p_logistic(mortality_risk_equations$DEATH1YEVENT,validation_patient[2,] %>% select(risk_factors_mortality))$p
# [1] 0.09313699
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
paste("patient ", 1)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
rbinom(1,1,0.01588353)
rbinom(100,1,0.01588353)
rbinom(1000,1,0.01588353)
sum(rbinom(1000,1,0.01588353))
sum(rbinom(1000,1,0.01588353))/1000
sum(rbinom(100,1,0.01588353))/1000
sum(rbinom(100,1,0.01588353))/1000
sum(rbinom(100,1,0.01588353))/1000
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table
View(sim_clinical_results_female_table)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_results_female
sim_CE_results_female_table_comp
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
getwd()
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/SMI in type II diabetes - HE model v3.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
baseline_characteristics
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
(0.073^-1)*exp(-9.207-0.293 +0.374 +0.048*6 + 0.632)*(exp(0.073*70)-1)
(0.073^-1)*exp(-9.207-0.293 +0.374 +0.048*6 + 0.632)^(exp(0.073*70)-1)
(0.073^-1)*exp(-9.207-0.293 +0.374 +0.048*6 + 0.632)*(exp(0.073*70)-1)
(0.073^-1)*exp(-9.207-0.293 +0.374 +0.048*6 + 0.632)*(exp(0.073*71)-1)
>>>>>>> Stashed changes
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_CE_results_female_table_comp
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
mean(6 , 4, 18,  6 , 5, 17, 30,  9,  6, 11)
mean(c(6 , 4, 18,  6 , 5, 17, 30,  9,  6, 11))
sim_clinical_results_female_table_comp
c(6,4,18,6,5,17,30,9,6,11)
c(6,4,18,6,5,17,30,9,6,11)-0.5
mean(c(6,4,18,6,5,17,30,9,6,11)-0.5)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
runif(1000)
mean(runif(1000))
mean(runif(1000))
mean(runif(1000))
mean(runif(1000))
mean(runif(1000))
mean(runif(1000))
mean(runif(1000))
sim_clinical_results_female_table_comp
source('~/GitHub/COMPAR-EU_diabetes_model/R/Analysis script template.R', echo=TRUE)
sim_clinical_results_female_table_comp
